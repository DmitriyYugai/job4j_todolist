# Проект - TODO list
[![Build Status](https://travis-ci.org/DmitriyYugai/job4j_todolist.svg?branch=master)](https://travis-ci.org/DmitriyYugai/job4j_todolist)

# Содержание
* [Использованные технологии](#Использованные-технологии)
* [О проекте](#О-проекте)
* [Сборка](#Сборка)
* [Использование](#Использование)
* [Контакты](#Контакты)
## Использованные технологии
* Servlets
* Hibernate (HQL)
* Collections Framework
* PostgreSQL
* Библиотека GSON
* SLF4J и Log4j
* AJAX
* JS, JQuery
* HTML, CSS, Bootstrap
* Travis CI
## О проекте
* Данное веб-приложение представляет собой сервис для работы с задачами. Является одностраничным приложением:<br><br>
![Главная страница](img/usage/index.PNG)<br><br>
* При добавлении задачи нужно добавить описание и выбрать категории задачи (можно выбрать несколько категорий), 
а также установить статус задачи (выполнена или нет)<br><br>
* Ниже в таблице можно сразу же просмотреть список всех добавленных задач. По умолчанию отображаются только невыполненные задачи. 
Для отображения всех задач (и выполненных, и невыполненных) нужно установить галку "Показать все". Также отображается автор задания.<br><br>
* Неавторизованные пользователи с приложением работать не могут. Форма авторизации:<br><br>
![Форма авторизации](img/about/auth.PNG)<br><br>
* Добавлена возможность регистрации новых пользователей. Форма регистрации:<br><br>
![Форма регистрации](img/about/reg.PNG)<br><br>
* Также реализована валидация всех форм приложения с помощью JS:
![Валидация 1](img/about/valid.PNG)<br><br>
![Валидация 2](img/about/valid1.PNG)<br><br>
![Валидация 3](img/about/valid2.PNG)<br><br>
* Отображение списка категорий реализовано с помощью AJAX-запроса (типа POST) на сервлет CategoryServlet. 
Список категорий можно поменять (см. раздел "[Сборка](#Сборка)")<br><br>
* На страницах используется динамическое обновление контента с помощью технологии AJAX<br><br>
* Проект состоит из двух слоёв: слой контроллеров (реализован на сервлетах) и слой по работе с БД PostgreSQL<br><br>
* Работа с БД осуществляется через Hibernate<br><br>
* Авторизация построена на базе фильтра (класс AuthFilter) и сервлета (класс AuthServlet)<br><br> 
* Для отображения авторизованного пользователя на главной странице используется AJAX-запрос на AuthServlet и объект Session<br><br>
* Работа с JSON-форматом производится с помощью библиотеки GSON<br><br>
* Страницы реализованы на HTML и Bootstrap. 
## Сборка
1. Установить JDK 14.
2. Скачать Maven.
3. Создать переменные окружения JAVA_HOME и M2_HOME и прописать в переменную окружения Path 
пути до бинарных файлов для JDK и для Maven:<br><br>
![Java Maven installing](img/build/java_maven.PNG)<br><br>
4. Установить сервер БД PostgreSQL. При установке задать:<br>
    * имя пользователя - postgres 
    * пароль - root
    * порт - 5432<br>
Также при установке сервера БД PostgreSQL нужно установить программу pg_Admin.

5. Скачать и установить Tomcat.
6. Скачать исходный код проекта с GitHub.
7. Перейти в корень проекта, где лежит файл pom.xml:<br><br>
![Переход в корень проекта 1](img/build/cd.PNG)<br><br>
![Переход в корень проекта 2](img/build/cd1.PNG)<br><br>
8. С помощью Maven осуществить сборку проекта:<br><br>
![Сборка проекта](img/build/package.PNG)<br><br>
При успешной сборке должна появиться папка target, в которой располагается war-архив:<br><br>
![Сборка прошла успешно](img/build/package1.PNG)<br><br>
![Папка target](img/build/target.PNG)<br><br>
![war-архив](img/build/target1.PNG)<br><br>
9. Переименовать war-архив:<br><br>
![Переименовать war-архив](img/build/target3.PNG)<br><br>
10. Запустить сервер БД, указав путь до папки data:<br><br>
![Запуск сервера БД](img/build/server_start.PNG)<br><br>
11. Запустить программу pg_Admin, установленную вместе с сервером БД PostgreSQL:<br><br>
![Запуск pg_Admin](img/build/pg_admin.PNG)<br><br>
12. Создать БД с названием todolist:<br><br>
![БД dreamjob](img/build/todolist_db.PNG)<br><br>
13. Открыть Query Tool для созданной БД и запустить SQL-скрипт create.sql, 
находящийся в папке db (данная папка находится в корне скачанного проекта):<br><br>
![Скрипт schema.sql](img/build/script.PNG)<br><br>
![Запуск скрипта schema.sql](img/build/pg_admin_script.PNG)<br><br>
Если нужно задать другой список категорий для задач, то нужно сделать это до запуска SQL-скрипта create.sql 
в следующих строчках скрипта:<br><br>
![Изменение скрипта schema.sql](img/build/change_script.PNG)<br><br>
14. Задеплоить собранный war-архив в папку webapps, находящуюся в корневой папке скачанного Tomcat:<br><br>
![Деплой war-архива 1](img/build/deploy.PNG)<br><br>
Сборка завершена. Теперь можно проверить работу приложения.
## Использование
Запускаем Tomcat:<br><br>
![Запуск Tomcat 1](img/usage/tomcat_start.PNG)<br><br>
![Запуск Tomcat 2](img/usage/tomcat_start1.PNG)<br><br>
Переходим на главную страницу приложения 
[http://localhost:8080/todolist/](http://localhost:8080/todolist/): <br><br>
![Авторизация 1](img/usage/auth.PNG)<br><br>
Как видно, при попытке перехода на главную страницу приложения нас перекидывает на форму авторизации, что означает, 
что с приложением могут работать только авторизованные пользователи. Так как сейчас в БД нет ни одного 
зарегистрированного пользователя, то сначала необходимо зарегистрироваться:<br><br>
![Регистрация 1](img/usage/reg.PNG)<br><br>
Теперь можно авторизоваться:<br><br>
![Авторизация 2](img/usage/auth1.PNG)<br><br>
![Главная страница](img/usage/index.PNG)<br><br>
Добавим невыполненную задачу:<br><br>
![Добавление невыполненной задачи 1](img/usage/task1.PNG)<br><br>
![Добавление невыполненной задачи 2](img/usage/task2.PNG)<br><br>
Добавим выполненную задачу:<br><br>
![Добавление выполненной задачи 1](img/usage/task3.PNG)<br><br>
![Добавление выполненной задачи 2](img/usage/task4.PNG)<br><br>
Для отображения выполненной задачи в таблице отметим галку "Показать все":<br><br>
![Отображение выполненной задачи](img/usage/task5.PNG)<br><br>
Зарегистрируем другого пользователя и добавим несколько задач от его имени:<br><br>
![Регистрация 2](img/usage/reg1.PNG)<br><br>
![Добавление задач](img/usage/task6.PNG)<br><br>
Проверим валидацию. Для этого нажмём на кнопки отправки форм, при этом не заполнив поля форм:<br><br>
![Проверка валидации 1](img/usage/valid1.PNG)<br><br>
![Проверка валидации 2](img/usage/valid2.PNG)<br><br>
![Проверка валидации 3](img/usage/valid3.PNG)<br><br>
## Контакты
Почта: dmitry_yugay@mail.ru<br>
Skype: live:.cid.9cdc925fb48220b4
